<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>åŠ å¯†è²¨å¹£æ­¢ææ§“æ¡¿è¨ˆç®—å™¨</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      padding: 30px;
      max-width: 700px;
      margin: auto;
    }
    h2 {
      text-align: center;
    }
    label, input, select {
      display: block;
      margin: 12px 0;
      font-size: 16px;
    }
    input[type="number"], input[type="text"], select {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 20px;
      width: 100%;
      cursor: pointer;
    }
    .result {
      margin-top: 25px;
      padding: 15px;
      background: #fff;
      border-radius: 6px;
      white-space: pre-wrap;
      font-size: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    #customSymbol {
      display: none;
    }
  </style>
</head>
<body>
  <h2>æ°¸çºŒåˆç´„å®šé‡æ­¢æè¨ˆç®—å™¨</h2>

  <label>æœ¬é‡‘ï¼ˆUSDï¼‰
    <input type="number" id="capital" step="0.01" />
  </label>

  <label>æ­¢ææ¯”ä¾‹ï¼ˆ%ï¼‰
    <input type="number" id="stopPercent" step="0.01" placeholder="ä¾‹å¦‚ï¼š1 ä»£è¡¨ 1%" />
  </label>

  <label>å¹£ç¨®é¸æ“‡
    <select id="symbol" onchange="handleSymbolChange()">
      <option value="BTC">BTC</option>
      <option value="ETH">ETH</option>
      <option value="SOL">SOL</option>
      <option value="DOGE">DOGE</option>
      <option value="BNB">BNB</option>
      <option value="XRP">XRP</option>
      <option value="ADA">ADA</option>
      <option value="SUI">SUI</option>
      <option value="custom">å…¶ä»–ï¼ˆè«‹è¼¸å…¥ï¼‰</option>
    </select>
  </label>

  <label id="customSymbolLabel">è‡ªå®šå¹£ç¨®åç¨±
    <input type="text" id="customSymbol" placeholder="ä¾‹å¦‚ï¼šPEPE" />
  </label>

  <label>é€²å ´æ–¹å‘
    <select id="direction">
      <option value="long">åšå¤š</option>
      <option value="short">åšç©º</option>
    </select>
  </label>

  <label>é€²å ´åƒ¹
    <input type="number" id="entryPrice" step="0.0001" />
  </label>

  <label>æ­¢æè·é›¢ï¼ˆ%ï¼‰
    <input type="number" id="stopRangePercent" step="0.01" placeholder="ä¾‹å¦‚ï¼š1 è¡¨ç¤º Â±1%" onchange="autoFillStopPrice()" />
  </label>

  <label>æ­¢æåƒ¹
    <input type="number" id="stopPrice" step="0.0001" />
  </label>

  <label>å€‰ä½æ¨¡å¼
    <select id="mode">
      <option value="isolated">é€å€‰ï¼ˆIsolatedï¼‰</option>
      <option value="cross">å…¨å€‰ï¼ˆCrossï¼‰</option>
    </select>
  </label>

  <button onclick="calculate()">è¨ˆç®—</button>

  <div class="result" id="output"></div>

  <script>
    function handleSymbolChange() {
      const selected = document.getElementById("symbol").value;
      const customInput = document.getElementById("customSymbol");
      const label = document.getElementById("customSymbolLabel");

      if (selected === "custom") {
        customInput.style.display = "block";
        label.style.display = "block";
      } else {
        customInput.style.display = "none";
        label.style.display = "none";
      }
    }

    function autoFillStopPrice() {
      const entry = parseFloat(document.getElementById("entryPrice").value);
      const direction = document.getElementById("direction").value;
      const percent = parseFloat(document.getElementById("stopRangePercent").value);

      if (!entry || !percent) return;

      const delta = entry * (percent / 100);
      const stopPrice = direction === "long" ? entry - delta : entry + delta;
      document.getElementById("stopPrice").value = stopPrice.toFixed(4);
    }

    function calculate() {
      const capital = parseFloat(document.getElementById("capital").value);
      const stopPercent = parseFloat(document.getElementById("stopPercent").value);
      const entry = parseFloat(document.getElementById("entryPrice").value);
      const stop = parseFloat(document.getElementById("stopPrice").value);
      const mode = document.getElementById("mode").value;
      const direction = document.getElementById("direction").value;
      const symbol = document.getElementById("symbol").value;
      const customSymbol = document.getElementById("customSymbol").value.trim();

      if (!capital || !stopPercent || !entry || !stop || entry === stop) {
        document.getElementById("output").innerText = "â—è«‹è¼¸å…¥æ­£ç¢ºæ•¸å€¼ï¼Œä¸”é€²å ´åƒ¹ â‰  æ­¢æåƒ¹ã€‚";
        return;
      }

      const coin = symbol === "custom" ? (customSymbol || "è‡ªå®šå¹£ç¨®") : symbol;
      const stopLossUSD = capital * (stopPercent / 100);
      const riskPerUnit = Math.abs(entry - stop);
      const positionSize = stopLossUSD / riskPerUnit;
      const notionalValue = positionSize * entry;
      const leverage = Math.floor(notionalValue / capital);
      const actualLossPercent = ((positionSize * riskPerUnit) / capital) * 100;

      const modeText = mode === 'isolated' ? 'é€å€‰' : 'å…¨å€‰';
      const dirText = direction === 'long' ? 'åšå¤š' : 'åšç©º';

      document.getElementById("output").innerText = 
`ğŸ“Œ æ¨¡å¼ï¼š${modeText}
ğŸ“ˆ æ–¹å‘ï¼š${dirText}
ğŸª™ å¹£ç¨®ï¼š${coin}
ğŸ’° å¯æ‰¿å—æå¤±é‡‘é¡ï¼š${stopLossUSD.toFixed(2)} USD
ğŸ“Š å€‰ä½å¤§å°ï¼šç´„ ${positionSize.toFixed(6)} ${coin}
ğŸ’µ å€‰ä½åƒ¹å€¼ï¼šç´„ ${notionalValue.toFixed(2)} USD
ğŸš€ å»ºè­°æ§“æ¡¿å€æ•¸ï¼š${leverage} å€
âš ï¸ æ½›åœ¨è™§æä½”æœ¬é‡‘ï¼š${actualLossPercent.toFixed(2)}%`;
    }
  </script>
</body>
</html>


  
